@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix schema: <https://schema.org/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix prof: <http://www.w3.org/ns/dx/prof/> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix core: <https://data.emobon.embrc.eu/ns/core#> .
@prefix emo: <https://data.emobon.embrc.eu/ns/> .

emo:EmobonCoreProfile a prof:Profile ;
    prof:isProfileOf <https://data.emobon.embrc.eu/ns/> ;
    dct:title "The EMO-BON Core Profile" ;
    dct:description "SHACL constraints for implementation of EMO-BON Core ontology." ;
    prof:hasResource emo:SchemaOrgOrganizationShape , emo:EmoBonOrganizationShape .


########################################
# SHACL shape for schema:Organization
########################################

emo:SchemaOrgOrganizationShape
  a sh:NodeShape ;
  sh:targetClass schema:Organization ;

  # Cardinality constraint on address
  sh:property [
    sh:path schema:address ;
    sh:class schema:PostalAddress ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  # Cardinality constraint on legalName
  sh:property [
    sh:path schema:legalName ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
.

########################################
# SHACL shape for EMO-BON Organization
########################################

emo:EmoBonOrganizationShape
  a sh:NodeShape ;
  sh:targetClass emo:Organization ;

  # Inherits Schema.org constraints (optional to repeat, SHACL doesn't do class inheritance automatically)
  sh:property [
    sh:path schema:address ;
    sh:class schema:PostalAddress ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path schema:legalName ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  # EDMO ID required
  sh:property [
    sh:path emo:edmoId ;
    sh:datatype xsd:positiveInteger ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
.